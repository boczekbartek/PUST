%LAB3
\chapter{Punkt 5}



Do wyznaczania nastaw regulatora PID wykorzystaliœmy model obiektu. Model ten stworzyliœmy wykorzystuj¹c wyliczone w punkcie 3
aproksymacje odpowiedzi skokowych cz³onami inercyjnymi drugiego rzêdu z opóŸnieniem.
Model ten zosta³ wyznaczony na podstawie wzoru:\\
\begin{equation}
\begin{aligned}
y_1(k) = &a_1^1y_1(k-1) + a_1^2y_1(k-2) + \\       
+ &b_1^{1,1}u_1(k-T^{\mathrm{D}1}_1-1) + b_1^{1,2}u_1(k-T^{\mathrm{D}1}_1-2) + \\
+ &b_1^{2,1}u_2(k-T^{\mathrm{D}2}_1-1) + b_1^{2,2}u_2(k-T^{\mathrm{D}2}_1-2) \\
y_2(k) = &a_2^1y_1(k-1) + a_2^2y_1(k-2) + \\       
+ &b_2^{1,1}u_1(k-T^{\mathrm{D}1}_2-1) + b_2^{1,2}u_1(k-T^{\mathrm{D}1}_2-2) + \\
+ &b_2^{2,1}u_2(k-T^{\mathrm{D}2}_2-1) + b_2^{2,2}u_2(k-T^{\mathrm{D}2}_2-2) \\
\end{aligned}
\label{eq:mod}
\end{equation}

Nastêpnie za pomoc¹ optymalizatora \verb|ga|, dla kilku skoków wartoœci zadanej, zosta³y wyznaczone nastawy regulatora PID dla modelu.\\
Uzyskane nastawy to:\\
$K1=\num{98,507776}; T_i1=\num{49,555644}; T_d1=\num{2,916919}; T_s=\num{0,5}$\\
$K2=\num{23,557519}; T_i2=\num{65,026976}; T_d2=\num{8,987056}; T_s=\num{0,5}$\\\\

Poni¿ej zosta³y przedstawione przebiegi uzyskane podczas symulacji:


\begin{figure}[h!]
	\centering
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=1600,ymin=-0.5,ymax=3,
	xlabel={$k$},
	ylabel={$Y1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5_PID_model_Y1.txt};
	\addplot[red] file {wykresy/zadanie5_PID_model_Y1_zad.txt};
	\legend{$Y1$, $Y1_{zad}$}
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=1600,ymin=-0.5,ymax=2,
	xlabel={$k$},
	ylabel={$Y2$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5_PID_model_Y2.txt};
	\addplot[red] file {wykresy/zadanie5_PID_model_Y2_zad.txt};
	\legend{$Y2$, $Y2_{zad}$}
	\end{axis}
	\end{tikzpicture}

	\caption{Wyjœcia}
	\label{bezPomZak}
\end{figure}
\FloatBarrier

\begin{figure}[h!]
	\centering
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=1600,ymin=-100,ymax=110,
	xlabel={$k$},
	ylabel={$U1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5_PID_model_U1.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=1600,ymin=-30,ymax=110,
	xlabel={$k$},
	ylabel={$U2$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5_PID_model_U2.txt};
	\end{axis}
	\end{tikzpicture}
	
	\caption{Sygna³y steruj¹ce}
	\label{bezPomZak}
\end{figure}

\begin{figure}[h!]
	\centering
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=1600,ymin=-1.1,ymax=1.5,
	xlabel={$k$},
	ylabel={$e1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5_PID_model_e1.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=1600,ymin=-1,ymax=2,
	xlabel={$k$},
	ylabel={$e2$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5_PID_model_e2.txt};
	\end{axis}
	\end{tikzpicture}
	
	\caption{B³êdy}
	\label{bezPomZak}
\end{figure}



\begin{figure}[h!]
	Nastêpnie wyznaczone parametry u¿yliœmy podczas eksperymentów na rzeczywistym obiekcie, co da³o dobre rezultaty w jakoœci sterowania:

\end{figure}



\begin{figure}
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=41,
	xlabel={$k$},
	ylabel={$y1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_y1_40.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=41,
	xlabel={$k$},
	ylabel={$y3$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_y3_40.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=0,ymax=100,
	xlabel={$k$},
	ylabel={$u1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_u1_40.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=-1,ymax=100,
	xlabel={$k$},
	ylabel={$u2$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_u2_40.txt};
	\end{axis}
	\end{tikzpicture}
	
	\caption{Regulacja DMC przy $Y_{zad}=40$}
	\label{bezPomZak}

\end{figure}

\begin{figure}
	B³¹d dla regulatora DMC przy skoku do 40:\\
	b³¹d1=$\num{5212,7}$\\
	b³¹d2=$\num{502,70}$
\end{figure}


\begin{figure}
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=50,
	xlabel={$k$},
	ylabel={$y1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_y1_45.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=50,
	xlabel={$k$},
	ylabel={$y3$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_y3_45.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=0,ymax=100,
	xlabel={$k$},
	ylabel={$u1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_u1_45.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=-1,ymax=100,
	xlabel={$k$},
	ylabel={$u2$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_u2_45.txt};
	\end{axis}
	\end{tikzpicture}
	
	\caption{Regulacja DMC przy $Y_{zad}=45$}
	\label{bezPomZak}
	
\end{figure}

\begin{figure}
	B³¹d dla DMC przy skoku do 45\\
	b³¹d1=13918\\
	b³¹d2=$\num{9,9682}$\\
\end{figure}


\begin{figure}
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=55,
	xlabel={$k$},
	ylabel={$y1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_y1_50.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=55,
	xlabel={$k$},
	ylabel={$y3$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_y3_50.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=0,ymax=100,
	xlabel={$k$},
	ylabel={$u1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_u1_50.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=-1,ymax=100,
	xlabel={$k$},
	ylabel={$u2$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/dmc_u2_50.txt};
	\end{axis}
	\end{tikzpicture}
	
	\caption{Regulacja DMC przy $Y_{zad}=50$}
	\label{bezPomZak}
	
\end{figure}



\begin{figure}
	 B³¹d dla DMC przy skoku do 50\\
	blad1=23719\\
	blad2=21237\\
\end{figure}



\begin{figure}
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=55,
	xlabel={$k$},
	ylabel={$y1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/pid_y1_40.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=55,
	xlabel={$k$},
	ylabel={$y3$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/pid_y3_40.txt};
	\end{axis}
	\end{tikzpicture}

	
	\caption{Regulacja PID przy $Y_{zad}=40$}
	\label{bezPomZak}
	
\end{figure}


\begin{figure}
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=55,
	xlabel={$k$},
	ylabel={$y1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/pid_y1_45.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=55,
	xlabel={$k$},
	ylabel={$y3$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/pid_y3_45.txt};
	\end{axis}
	\end{tikzpicture}
	
	
	\caption{Regulacja PID przy $Y_{zad}=45$}
	\label{bezPomZak}
	
\end{figure}



\begin{figure}
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=55,
	xlabel={$k$},
	ylabel={$y1$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/pid_y1_50.txt};
	\end{axis}
	\end{tikzpicture}
	
	\begin{tikzpicture}
	\begin{axis}[
	width=4.667in,
	height=1.8in,
	xmin=0,xmax=385,ymin=32,ymax=55,
	xlabel={$k$},
	ylabel={$y3$},
	legend pos=north east,
	y tick label style={/pgf/number format/1000 sep=},
	]
	\addplot[const plot,blue] file {wykresy/zadanie5/pid_y3_50.txt};
	\end{axis}
	\end{tikzpicture}
	
	
	\caption{Regulacja PID przy $Y_{zad}=50$}
	\label{bezPomZak}
	
\end{figure}